{% extends '../base.html' %}
{% block content %}

    <h4>Piotroski F-Scores</h4><br>
    <form action="" method="post">
        {% csrf_token %}
        {{ forms.optimize }}
        <div id="progress-wrapper">
            <input type="submit" value="Update scores", id="progress-bar-trigger">
            <div id="progress-bar" style="background-color: blue; width: 0%;">&nbsp;</div>
            <div id="progress-bar-message"> </div>
        </div>
    </form>
    <table class="table table-sm", style="width:100%">
        <thead class="thead-dark">
        <tr>
            <th>Symbol</th>
            <th style="width:20%">Name</th>
            <th>EPS</th>
            <th>P/E Ratio</th>
            <th>Cash</th>
            <th>Return On Assets (ROA)</th>
            <th>Accruals</th>
            <th>&#916; Cash</th>
            <th>&#916; ROA</th>
            <th>&#916; Long Leverage Ratio</th>
            <th>&#916; Current Leverage Ratio</th>
            <th>&#916; Shares</th>
            <th>&#916; Gross Margin</th>
            <th>&#916; Asset Turnover</th>
            <th>F-score</th>
            <th>Weighted F-score</th>
            <th>Calculation date</th>
        </tr>
        </thead>
        <tbody>
        {% if score_table %}
        {% for i in score_table %}
        <tr>
            <td>{{i.symbol}}</td>
            <td>{{i.longname}}</td>
            <td>{{i.EPS}}</td>
            <td>{{i.PE_ratio}}</td>
            <td>{{i.cash}}</td>
            <td>{{i.ROA}}</td>
            <td>{{i.accruals}}</td>
            <td>{{i.delta_cash}}</td>
            <td>{{i.delta_ROA}}</td>
            <td>{{i.delta_long_lev_ratio}}</td>
            <td>{{i.delta_current_lev_ratio}}</td>
            <td>{{i.delta_shares}}</td>
            <td>{{i.delta_gross_margin}}</td>
            <td>{{i.delta_asset_turnover}}</td>
            <td>{{i.PF_score}}</td>
            <td>{{i.PF_score_weighted}}</td>
            <td>{{i.date}}</td>
        </tr>
        {% endfor %}
        {% endif %}
        </tbody>
    </table>


{% endblock %}